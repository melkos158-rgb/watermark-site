{% extends "market/layout.html" %}
{% set market_page = 'list' %}

{% block market_body %}
<div class="market-main" data-market-root>

  <!-- Верхній ряд з селектами "Показати" / "Сортувати" -->
  <div class="market-controls">
    <div class="controls-left">
      <label class="mc-label">
        Показати:
        <select class="mc-select" data-filter-show>
          <option value="all" selected>Усі</option>
          <option value="free">Безкоштовні</option>
          <option value="paid">Платні</option>
        </select>
      </label>
    </div>

    <div class="controls-right">
      <label class="mc-label">
        Сортувати:
        <select class="mc-select" data-filter-sort>
          <option value="new" selected>Нові</option>
          <option value="popular">Популярні</option>
          <option value="top">Топ за рейтингом</option>
          <option value="price_asc">Ціна ↑</option>
          <option value="price_desc">Ціна ↓</option>
        </select>
      </label>
    </div>
  </div>

  <!-- Блок для повідомлень (помилка / “немає моделей” / лоадер) -->
  <div class="market-notice" data-market-notice style="display:none"></div>

  <!-- Сітка карток. JS (market.js) підміняє вміст через data-market-grid -->
  <div class="market-grid-wrap">
    <div class="market-grid" data-market-grid>
      <div class="market-grid-placeholder">
        Завантаження моделей…
      </div>
    </div>

    <!-- sentinel для infinite-scroll (опціонально) -->
    <div class="market-sentinel" data-market-sentinel></div>
  </div>

  <!-- Пагінація, заповнюється JS -->
  <div class="market-pagination" data-market-pagination></div>
</div>

<style>
  .market-main{
    max-width:1280px;
    margin:0 auto;
    padding:16px 16px 32px;
  }

  .market-controls{
    display:flex;
    flex-wrap:wrap;
    gap:12px;
    justify-content:space-between;
    align-items:flex-end;
    margin-bottom:16px;
  }

  .mc-label{
    font-size:13px;
    color:var(--muted, #9fb0d4);
    display:flex;
    gap:8px;
    align-items:center;
  }

  .mc-select{
    background:var(--card, #11141b);
    border:1px solid var(--line, #1b2131);
    border-radius:999px;
    padding:6px 10px;
    color:var(--ink, #e8eaed);
    font-size:13px;
    outline:none;
  }

  .market-grid-wrap{
    border-radius:14px;
    border:1px solid var(--line, #1b2131);
    background:rgba(15,17,23,.7);
    padding:16px;
    position:relative;
  }

  .market-grid{
    display:grid;
    gap:16px;
    grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  }

  .market-grid-placeholder{
    text-align:center;
    font-size:14px;
    color:var(--muted, #9fb0d4);
    padding:24px 0;
  }

  .market-pagination{
    margin-top:16px;
    display:flex;
    justify-content:center;
  }

  .market-pagination-inner{
    display:flex;
    gap:6px;
  }

  .pg-btn{
    min-width:32px;
    padding:6px 10px;
    border-radius:999px;
    border:1px solid var(--line, #1b2131);
    background:var(--card, #11141b);
    color:var(--ink, #e8eaed);
    font-size:13px;
    cursor:pointer;
  }

  .pg-btn.is-active{
    background:var(--btn, #1a73e8);
    border-color:var(--btn, #1a73e8);
    color:#fff;
  }

  .market-notice{
    margin-bottom:12px;
    padding:10px 12px;
    border-radius:12px;
    border:1px solid var(--line, #1b2131);
    background:var(--card, #11141b);
    font-size:14px;
    color:var(--ink, #e8eaed);
  }

  .market-notice.error{
    border-color:#ef4444;
    color:#fecaca;
  }

  .market-sentinel{
    height:1px;
  }

  @media (max-width:768px){
    .market-main{padding:12px;}
    .market-grid-wrap{padding:12px;}
  }
</style>
{% endblock %}
