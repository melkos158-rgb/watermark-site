{% extends "base.html" %}

{% block title %}–ü—Ä–æ—Ñ—ñ–ª—ñ –ø—Ä–∏–Ω—Ç–µ—Ä—ñ–≤ ‚Äî Proofly STL{% endblock %}

{% block content %}
<style>
  .pp-wrap{
    max-width:1200px;
    margin:24px auto 40px;
    padding:0 12px;
  }
  .pp-header{
    display:flex;
    justify-content:space-between;
    align-items:flex-start;
    gap:12px;
    margin-bottom:18px;
  }
  .pp-title{
    font-size:22px;
    font-weight:600;
  }
  .pp-sub{
    font-size:13px;
    opacity:.8;
    margin-top:4px;
  }
  .pp-badges{
    display:flex;
    flex-wrap:wrap;
    gap:6px;
    margin-top:8px;
  }
  .pp-badge{
    font-size:11px;
    padding:2px 8px;
    border-radius:999px;
    border:1px solid #1f2937;
    background:#020617;
    opacity:.85;
  }

  .pp-layout{
    display:grid;
    grid-template-columns: minmax(0,1.1fr) minmax(0,1.1fr) minmax(0,0.9fr);
    gap:16px;
    align-items:start;
  }
  @media(max-width:1100px){
    .pp-layout{
      grid-template-columns:1fr;
    }
  }

  .pp-card{
    background:#0f1117;
    border:1px solid #242735;
    border-radius:12px;
    padding:14px 16px;
  }
  .pp-card h2{
    margin:0 0 10px 0;
    font-size:18px;
  }
  .pp-card h3{
    margin:0 0 8px 0;
    font-size:15px;
  }
  .pp-help{
    font-size:12px;
    opacity:.8;
    margin-top:4px;
  }

  .pp-row{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
    align-items:center;
    margin-bottom:8px;
  }

  .pp-input,
  .pp-select{
    background:#050712;
    border:1px solid #252a3a;
    border-radius:8px;
    padding:6px 10px;
    color:#e2e8f0;
    font-size:13px;
    width:100%;
    box-sizing:border-box;
  }
  .pp-select{
    border-radius:999px;
    padding:4px 10px;
    width:auto;
  }

  .pp-search-input{
    flex:1 1 auto;
  }

  .pp-btn{
    border-radius:999px;
    border:1px solid #2563eb;
    background:#1d3a7f;
    padding:6px 14px;
    font-size:13px;
    cursor:pointer;
    color:#e5f0ff;
    display:inline-flex;
    align-items:center;
    gap:4px;
    transition:background .12s,border-color .12s,transform .06s;
  }
  .pp-btn.secondary{
    border-color:#374151;
    background:#111827;
    color:#e5e7eb;
  }
  .pp-btn.danger{
    border-color:#b91c1c;
    background:#7f1d1d;
  }
  .pp-btn:active{
    transform:translateY(1px);
  }
  .pp-btn:disabled{
    opacity:.6;
    cursor:default;
  }

  .pp-list{
    margin-top:10px;
    display:flex;
    flex-direction:column;
    gap:8px;
    max-height:460px;
    overflow:auto;
  }
  .pp-item{
    padding:8px 10px;
    border-radius:8px;
    border:1px solid #1f2937;
    background:#020617;
    display:grid;
    grid-template-columns:minmax(0,1.4fr) minmax(0,1.2fr) auto;
    gap:8px;
    align-items:center;
    cursor:pointer;
    transition:border-color .12s,background .12s,transform .06s;
  }
  .pp-item:hover{
    border-color:#2563eb;
    background:#020817;
  }
  .pp-item.active{
    border-color:#22c55e;
    background:#022c22;
  }
  .pp-item-name{
    font-size:14px;
    font-weight:500;
  }
  .pp-item-meta{
    font-size:11px;
    opacity:.85;
  }
  .pp-item-tags{
    font-size:11px;
    opacity:.8;
  }
  .pp-item-actions{
    display:flex;
    gap:6px;
    justify-content:flex-end;
  }
  .pp-tag-pill{
    display:inline-flex;
    align-items:center;
    padding:1px 6px;
    border-radius:999px;
    border:1px solid #1f2937;
    margin-right:4px;
  }

  .pp-grid{
    display:grid;
    grid-template-columns:repeat(2, minmax(0,1fr));
    gap:8px;
  }
  .pp-grid-3{
    display:grid;
    grid-template-columns:repeat(3, minmax(0,1fr));
    gap:8px;
  }
  @media(max-width:700px){
    .pp-grid,
    .pp-grid-3{
      grid-template-columns:1fr;
    }
  }
  .pp-field label{
    display:block;
    font-size:12px;
    opacity:.9;
    margin-bottom:3px;
  }

  .pp-chips{
    display:flex;
    flex-wrap:wrap;
    gap:6px;
    margin-top:4px;
  }
  .pp-chip{
    font-size:11px;
    padding:2px 7px;
    border-radius:999px;
    border:1px solid #1f2937;
    background:#020617;
    opacity:.9;
  }

  .pp-status{
    font-size:12px;
    opacity:.8;
    margin-top:6px;
  }

  .pp-compat{
    font-size:13px;
    display:grid;
    grid-template-columns:1fr;
    gap:6px;
    margin-top:8px;
  }
  .pp-compat span strong{
    font-weight:600;
  }
</style>

<div class="pp-wrap">
  <header class="pp-header">
    <div>
      <div class="pp-title">–ü—Ä–æ—Ñ—ñ–ª—ñ –ø—Ä–∏–Ω—Ç–µ—Ä—ñ–≤</div>
      <div class="pp-sub">
        –ó–±–µ—Ä—ñ–≥–∞–π —Å–≤–æ—ó –ø—Ä–∏–Ω—Ç–µ—Ä–∏, —Å–æ–ø–ª–∞, –º–∞—Ç–µ—Ä—ñ–∞–ª–∏ —Ç–∞ –±–∞–∑–æ–≤—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è.
        –î–∞–ª—ñ —Ü—ñ –ø—Ä–æ—Ñ—ñ–ª—ñ –±—É–¥—É—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è —É <strong>Printability Check</strong>,
        <strong>G-code Viewer</strong>, –±–∞–Ω–¥–ª–∞—Ö —ñ –º–∞–π–±—É—Ç–Ω—å–æ–º—É –∞–≤—Ç–æ-—Å–ª–∞–π—Å–µ—Ä—ñ.
      </div>
      <div class="pp-badges">
        <div class="pp-badge">üßµ –î—ñ–∞–º–µ—Ç—Ä —Ñ—ñ–ª–∞–º–µ–Ω—Ç–∞</div>
        <div class="pp-badge">üî© –°–æ–ø–ª–æ</div>
        <div class="pp-badge">üìè –û–± º—î–º —Å—Ç–æ–ª–∞</div>
        <div class="pp-badge">‚öôÔ∏è –®–≤–∏–¥–∫–æ—Å—Ç—ñ</div>
      </div>
    </div>
    <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end;">
      <button id="pp-btn-new" class="pp-btn">Ôºã –ù–æ–≤–∏–π –ø—Ä–æ—Ñ—ñ–ª—å</button>
      <div class="pp-help" style="max-width:200px;text-align:right;">
        –ê–∫—Ç–∏–≤–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î—Ç—å—Å—è –∑ —ñ–Ω—à–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ Proofly.
      </div>
    </div>
  </header>

  <div class="pp-layout">
    <!-- –õ–Ü–í–ê: —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ—ñ–ª—ñ–≤ -->
    <section class="pp-card">
      <h2>–°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ—ñ–ª—ñ–≤</h2>

      <div class="pp-row">
        <input id="pp-search" class="pp-input pp-search-input" type="text" placeholder="–ü–æ—à—É–∫: Bambu X1C, Ender 3, Prusa MK4‚Ä¶">
        <select id="pp-filter-type" class="pp-select">
          <option value="">–¢–∏–ø: –≤—Å—ñ</option>
          <option value="bed-slinger">Bed-slinger</option>
          <option value="corexy">CoreXY</option>
          <option value="bed-slinger">Cartesion</option>
          <option value="delta">Delta</option>
          <option value="bambu">Bambu</option>
        </select>
      </div>

      <div id="pp-list" class="pp-list">
        <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ—ñ–ª—ñ–≤ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ printer_profiles.js -->
      </div>

      <div id="pp-list-empty" class="pp-help" style="margin-top:8px;display:none;">
        –ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –∂–æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ñ—ñ–ª—é. –°—Ç–≤–æ—Ä–∏ –ø–µ—Ä—à–∏–π ‚Äî –Ω–∞–ø—Ä–∏–∫–ª–∞–¥,
        <strong>Bambu Lab A1 mini</strong> –∞–±–æ <strong>Ender-3 V2</strong>.
      </div>
    </section>

    <!-- –¶–ï–ù–¢–†: —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è -->
    <section class="pp-card">
      <h2 id="pp-form-title">–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—Ä–æ—Ñ—ñ–ª—é</h2>
      <div class="pp-help">
        –ó–∞–ø–æ–≤–Ω–∏ –æ—Å–Ω–æ–≤–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –ø—Ä–∏–Ω—Ç–µ—Ä–∞. –î–ª—è –±–∞–∑–æ–≤–æ–≥–æ UX –¥–æ—Å—Ç–∞—Ç–Ω—å–æ —Ä–æ–∑–º—ñ—Ä—É —Å—Ç–æ–ª–∞,
        —Å–æ–ø–ª–∞, –¥—ñ–∞–º–µ—Ç—Ä–∞ —Ñ—ñ–ª–∞–º–µ–Ω—Ç–∞ —Ç–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó —à–≤–∏–¥–∫–æ—Å—Ç—ñ.
      </div>

      <form id="pp-form" autocomplete="off" style="margin-top:10px;">
        <input type="hidden" id="pp-id">

        <div class="pp-grid">
          <div class="pp-field">
            <label>–ù–∞–∑–≤–∞ –ø—Ä–æ—Ñ—ñ–ª—é</label>
            <input id="pp-name" class="pp-input" placeholder="Bambu X1C, Ender-3 V3 KE‚Ä¶">
          </div>
          <div class="pp-field">
            <label>–ë—Ä–µ–Ω–¥ / –º–æ–¥–µ–ª—å</label>
            <input id="pp-model" class="pp-input" placeholder="Bambu Lab, Creality, Prusa‚Ä¶">
          </div>
        </div>

        <div class="pp-grid">
          <div class="pp-field">
            <label>–¢–∏–ø –ø—Ä–∏–Ω—Ç–µ—Ä–∞</label>
            <select id="pp-type" class="pp-input">
              <option value="">(–Ω–µ –≤–∫–∞–∑–∞–Ω–æ)</option>
              <option value="cartesian">Cartesian / bed-slinger</option>
              <option value="corexy">CoreXY</option>
              <option value="delta">Delta</option>
              <option value="bambu">Bambu / –∑–∞–∫—Ä–∏—Ç–∏–π</option>
              <option value="resin">Resin (MSLA)</option>
            </select>
          </div>
          <div class="pp-field">
            <label>–î—Ä–∞–π–≤–µ—Ä / –ø—Ä–æ—à–∏–≤–∫–∞</label>
            <input id="pp-firmware" class="pp-input" placeholder="Marlin, Klipper, Bambu OS‚Ä¶">
          </div>
        </div>

        <h3 style="margin-top:14px;">–†–æ–∑–º—ñ—Ä —Å—Ç–æ–ª–∞ (XYZ, –º–º)</h3>
        <div class="pp-grid-3">
          <div class="pp-field">
            <label>X (—à–∏—Ä–∏–Ω–∞)</label>
            <input id="pp-bed-x" class="pp-input" type="number" min="1" step="1" placeholder="256">
          </div>
          <div class="pp-field">
            <label>Y (–≥–ª–∏–±–∏–Ω–∞)</label>
            <input id="pp-bed-y" class="pp-input" type="number" min="1" step="1" placeholder="256">
          </div>
          <div class="pp-field">
            <label>Z (–≤–∏—Å–æ—Ç–∞)</label>
            <input id="pp-bed-z" class="pp-input" type="number" min="1" step="1" placeholder="256">
          </div>
        </div>

        <h3 style="margin-top:14px;">–§—ñ–ª–∞–º–µ–Ω—Ç / —Å–æ–ø–ª–æ</h3>
        <div class="pp-grid-3">
          <div class="pp-field">
            <label>–î—ñ–∞–º–µ—Ç—Ä —Ñ—ñ–ª–∞–º–µ–Ω—Ç–∞, –º–º</label>
            <input id="pp-filament-dia" class="pp-input" type="number" step="0.01" placeholder="1.75">
          </div>
          <div class="pp-field">
            <label>–î—ñ–∞–º–µ—Ç—Ä —Å–æ–ø–ª–∞, –º–º</label>
            <input id="pp-nozzle-dia" class="pp-input" type="number" step="0.01" placeholder="0.4">
          </div>
          <div class="pp-field">
            <label>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å–æ–ø–ª–∞ (—Ç–∏–ø–æ–≤–∞), ¬∞C</label>
            <input id="pp-temp-nozzle" class="pp-input" type="number" step="1" placeholder="210">
          </div>
        </div>

        <div class="pp-grid-3">
          <div class="pp-field">
            <label>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Å—Ç–æ–ª–∞ (—Ç–∏–ø–æ–≤–∞), ¬∞C</label>
            <input id="pp-temp-bed" class="pp-input" type="number" step="1" placeholder="60">
          </div>
          <div class="pp-field">
            <label>–ú–∞–∫—Å. —à–≤–∏–¥–∫—ñ—Å—Ç—å –¥—Ä—É–∫—É, –º–º/—Å</label>
            <input id="pp-max-print-speed" class="pp-input" type="number" step="1" placeholder="250">
          </div>
          <div class="pp-field">
            <label>–ú–∞–∫—Å. —à–≤–∏–¥–∫—ñ—Å—Ç—å –ø–µ—Ä–µ–º—ñ—â–µ–Ω—å, –º–º/—Å</label>
            <input id="pp-max-travel-speed" class="pp-input" type="number" step="1" placeholder="500">
          </div>
        </div>

        <h3 style="margin-top:14px;">–ú–∞—Ç–µ—Ä—ñ–∞–ª–∏ / —Ñ—ñ—à–∫–∏</h3>
        <div class="pp-field">
          <label>–ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞–Ω—ñ –º–∞—Ç–µ—Ä—ñ–∞–ª–∏</label>
          <input id="pp-materials" class="pp-input" placeholder="PLA, PETG, ABS, TPU‚Ä¶">
          <div class="pp-help">–ü—Ä–æ—Å—Ç–æ —á–µ—Ä–µ–∑ –∫–æ–º—É; –¥–∞–ª—ñ —Ü–µ –º–æ–∂–Ω–∞ –±—É–¥–µ –ø—Ä–∏–≤ º—è–∑–∞—Ç–∏ –¥–æ –º–∞—Ä–∫–µ—Ç—É —Ñ—ñ–ª–∞–º–µ–Ω—Ç–∞.</div>
        </div>

        <div class="pp-field">
          <label>–û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ</label>
          <textarea id="pp-notes" class="pp-input" rows="3" placeholder="AMS, –∞–≤—Ç–æ-–∫–∞–ª—ñ–±—Ä–æ–≤–∫–∞, –¥–∞—Ç—á–∏–∫–∏, direct drive‚Ä¶"></textarea>
        </div>

        <div class="pp-row" style="justify-content:space-between;margin-top:12px;">
          <div>
            <button type="button" id="pp-btn-save" class="pp-btn">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏</button>
            <button type="button" id="pp-btn-duplicate" class="pp-btn secondary">‚ßâ –î—É–±–ª—é–≤–∞—Ç–∏</button>
          </div>
          <div>
            <button type="button" id="pp-btn-delete" class="pp-btn danger">üóë –í–∏–¥–∞–ª–∏—Ç–∏</button>
          </div>
        </div>

        <div id="pp-status" class="pp-status"></div>
      </form>
    </section>

    <!-- –ü–†–ê–í–ê: –∞–∫—Ç–∏–≤–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å / —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—å -->
    <section class="pp-card">
      <h2>–ê–∫—Ç–∏–≤–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å</h2>
      <div class="pp-help">
        –û–±—Ä–∞–Ω–∏–π –ø—Ä–æ—Ñ—ñ–ª—å –±—É–¥–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏—Å—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —É:
        <ul style="margin:4px 0 0 18px;font-size:12px;opacity:.9;">
          <li>Printability Check (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–ª—ñ–∑–∞–Ω–Ω—è –≤ —Å—Ç—ñ–ª, –º—ñ–Ω. —Ç–æ–≤—â–∏–Ω–∞, –∫—É—Ç –Ω–∞–≤–∏—Å–∞–Ω—å)</li>
          <li>G-code Viewer (–∞–Ω–∞–ª—ñ—Ç–∏–∫–∞ —á–∞—Å—É —Ç–∞ —à–≤–∏–¥–∫–æ—Å—Ç–µ–π)</li>
          <li>–ë–∞–Ω–¥–ª–∏ –∑ —Ñ—ñ–ª–∞–º–µ–Ω—Ç–æ–º —ñ —Ç–∞—Ä–≥–µ—Ç–æ–≤–∞–Ω–∏–º–∏ STL</li>
        </ul>
      </div>

      <div id="pp-active" style="margin-top:10px;font-size:13px;">
        <div style="opacity:.7;">–©–µ –Ω—ñ—á–æ–≥–æ –Ω–µ –æ–±—Ä–∞–Ω–æ. –ö–ª—ñ–∫–Ω–∏ –ø–æ –±—É–¥—å-—è–∫–æ–º—É –ø—Ä–æ—Ñ—ñ–ª—é –≤ —Å–ø–∏—Å–∫—É –∑–ª—ñ–≤–∞, —â–æ–± –∑—Ä–æ–±–∏—Ç–∏ –π–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–∏–º.</div>
      </div>

      <h3 style="margin-top:16px;">–°—É–º—ñ—Å–Ω—ñ—Å—Ç—å</h3>
      <div id="pp-compat" class="pp-compat">
        <!-- JS –≤—Å—Ç–∞–≤–∏—Ç—å –∞–Ω–∞–ª—ñ–∑ —Å—É–º—ñ—Å–Ω–æ—Å—Ç—ñ -->
      </div>

      <h3 style="margin-top:16px;">–®–≤–∏–¥–∫—ñ –ø—Ä–µ—Å–µ—Ç–∏</h3>
      <div class="pp-chips" id="pp-presets">
        <!-- –∑–∞–ø–æ–≤–Ω—é—î—Ç—å—Å—è –∑ JS: Bambu A1, Ender 3 —Ç–æ—â–æ -->
      </div>

      <div class="pp-help" style="margin-top:10px;">
        –ö–ª—ñ–∫ –ø–æ –ø—Ä–µ—Å–µ—Ç—É ‚Äî —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ–≥–æ –ø—Ä–æ—Ñ—ñ–ª—é –∑ –≥–æ—Ç–æ–≤–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, —è–∫—ñ –º–æ–∂–Ω–∞ –ø—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏.
      </div>
    </section>
  </div>
</div>

<script type="module">
  import { initPrinterProfiles } from "{{ url_for('static', filename='js/printer_profiles.js') }}";

  document.addEventListener("DOMContentLoaded", () => {
    initPrinterProfiles({
      listId: "pp-list",
      listEmptyId: "pp-list-empty",
      searchId: "pp-search",
      filterTypeId: "pp-filter-type",
      btnNewId: "pp-btn-new",
      formId: "pp-form",
      statusId: "pp-status",
      activeContainerId: "pp-active",
      compatContainerId: "pp-compat",
      presetsContainerId: "pp-presets",
    });
  });
</script>
{% endblock %}
