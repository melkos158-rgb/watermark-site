{% extends "base.html" %}

{% block title %}Мої оголошення — Proofly STL Market{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/my-ads.css') }}">

<div class="my-ads-page">
  {% if user_ads %}
    <!-- Top Carousel -->
    <section class="my-ads-carousel" id="my-ads-carousel">
      <button class="my-ads-arrow my-ads-arrow-left" type="button" aria-label="Попередня модель">
        ‹
      </button>

      <div class="my-ads-carousel-strip">
        <!-- Left preview card -->
        <div class="my-ads-card my-ads-card-preview" data-position="prev">
          <div class="my-ads-card-thumb"></div>
        </div>

        <!-- Center main card -->
        <div class="my-ads-card my-ads-card-main" data-position="current">
          <div class="my-ads-card-thumb"></div>
          <div class="my-ads-card-overlay">
            <h3 class="my-ads-card-title"></h3>
            <p class="my-ads-card-price"></p>
          </div>
        </div>

        <!-- Right preview card -->
        <div class="my-ads-card my-ads-card-preview" data-position="next">
          <div class="my-ads-card-thumb"></div>
        </div>
      </div>

      <button class="my-ads-arrow my-ads-arrow-right" type="button" aria-label="Наступна модель">
        ›
      </button>
    </section>

    <!-- Bottom Grid -->
    <section class="my-ads-grid-section">
      <h2 class="my-ads-grid-title">Мої оголошення</h2>
      <div class="my-ads-grid">
        {% for ad in user_ads[:8] %}
          <article class="my-ads-grid-card" data-ad-id="{{ ad.id }}">
            <div class="my-ads-grid-card-thumb" style="background-image: url('{{ ad.thumbnail or ad.cover or ad.cover_url or '/static/img/placeholder_stl.jpg' }}')"></div>
            <div class="my-ads-grid-card-content">
              <h3 class="my-ads-grid-card-title">{{ ad.title }}</h3>
              <p class="my-ads-grid-card-price">
                {% if ad.price > 0 %}
                  {{ ad.price }} PLN
                {% else %}
                  Безкоштовно
                {% endif %}
              </p>
              <a href="{{ url_for('market.page_edit_item', item_id=ad.id) }}" class="my-ads-grid-card-edit-btn">
                Редагувати
              </a>
            </div>
          </article>
        {% endfor %}
      </div>
    </section>
  {% else %}
    <!-- Empty state -->
    <div class="my-ads-empty">
      <p>Поки ще немає моделей…</p>
    </div>
  {% endif %}
</div>

<script src="{{ url_for('static', filename='js/my-ads.js') }}"></script>
<script>
  // Pass ads data to JavaScript for carousel
  window.MY_ADS_DATA = {{ user_ads | tojson | safe }};
</script>
{% endblock %}
