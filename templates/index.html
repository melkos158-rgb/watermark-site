{% extends "base.html" %}

{% block title %}Proofly ‚Äî STL Marketplace{% endblock %}

{% block extra_head %}
<style>
  .home-hero{
    background: radial-gradient(1200px 500px at 10% 10%, rgba(173,92,255,.22), transparent 55%),
                radial-gradient(900px 420px at 85% 20%, rgba(43,134,197,.22), transparent 55%),
                linear-gradient(180deg, rgba(255,255,255,.02), transparent);
    border: 1px solid color-mix(in srgb, var(--line) 80%, #2b86c5 20%);
    border-radius: 18px;
    padding: 22px;
    box-shadow: 0 18px 50px rgba(0,0,0,.35);
  }
  .home-grid{display:grid;grid-template-columns: 1.2fr .8fr;gap:16px;align-items:stretch}
  @media (max-width: 900px){ .home-grid{grid-template-columns:1fr} }

  .kicker{color:var(--muted);font-weight:600;font-size:13px;letter-spacing:.08em;text-transform:uppercase;margin:0 0 8px}
  .h1{font-size:44px;line-height:1.05;margin:0 0 10px;font-weight:900}
  @media (max-width: 520px){ .h1{font-size:34px} }
  .lead{color:color-mix(in srgb, var(--ink) 78%, var(--muted) 22%);font-size:16px;line-height:1.5;margin:0 0 16px}

  .hero-actions{display:flex;flex-wrap:wrap;gap:10px;margin-top:14px}
  .btn{
    display:inline-flex;align-items:center;justify-content:center;gap:8px;
    padding:10px 14px;border-radius:12px;text-decoration:none;
    border:1px solid color-mix(in srgb, var(--line) 75%, #7ba2ff 25%);
    background: color-mix(in srgb, var(--card) 92%, #1f2b45 8%);
    color:var(--ink); font-weight:700;
  }
  .btn.primary{
    background: linear-gradient(135deg, #1a73e8, #784ba0);
    border-color: transparent;
  }
  .btn:hover{filter:brightness(1.08);text-decoration:none}
  .searchbox{
    display:flex;gap:10px;align-items:center;
    background: color-mix(in srgb, var(--card) 92%, #0b0d12 8%);
    border:1px solid var(--line); border-radius:14px; padding:10px;
  }
  .searchbox input{
    flex:1;border:0;outline:none;background:transparent;color:var(--ink);
    font-size:15px;padding:6px 8px;
  }
  .chiprow{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
  .chip{
    font-size:12px;color:var(--ink);
    background: color-mix(in srgb, var(--card) 88%, #182034 12%);
    border:1px solid color-mix(in srgb, var(--line) 85%, #2a3b63 15%);
    padding:6px 10px;border-radius:999px;
    cursor:pointer; user-select:none;
  }
  .panel{
    border:1px solid var(--line); border-radius:18px;
    padding:16px; background: color-mix(in srgb, var(--card) 94%, #0b0d12 6%);
  }
  .stat{display:flex;justify-content:space-between;align-items:center;padding:10px 0;border-bottom:1px dashed color-mix(in srgb, var(--line) 70%, transparent 30%)}
  .stat:last-child{border-bottom:0}
  .stat b{font-size:14px}
  .stat span{color:var(--muted);font-size:13px}

  .section{margin-top:18px}
  .cards{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
  @media (max-width: 900px){ .cards{grid-template-columns:1fr} }
  .card{
    border:1px solid var(--line); border-radius:16px;
    padding:14px; background: color-mix(in srgb, var(--card) 94%, #0b0d12 6%);
  }
  .card h3{margin:0 0 6px;font-size:16px}
  .card p{margin:0;color:var(--muted);font-size:13px;line-height:1.45}
</style>
{% endblock %}

{% block content %}
<div class="home-hero">
  <div class="home-grid">
    <div>
      <p class="kicker">STL marketplace ‚Ä¢ fast ‚Ä¢ creator-first</p>
      <h1 class="h1">Sell & discover STL models with a marketplace built for speed.</h1>
      <p class="lead">
        Proofly —Ä–æ–±–∏—Ç—å –º–∞—Ä–∫–µ—Ç –ø—Ä–æ—Å—Ç–∏–º: —à–≤–∏–¥–∫–∏–π –ø–æ—à—É–∫, —á–∏—Å—Ç–∏–π UI, –ø—Ä–æ–∑–æ—Ä—ñ –ø—Ä–∞–≤–∏–ª–∞, —ñ —Ñ–æ–∫—É—Å –Ω–∞ –∞–≤—Ç–æ—Ä–∞—Ö.
        –ó–∞–π–¥–∏ –≤ Market –∞–±–æ –∑–∞–≤–∞–Ω—Ç–∞–∂ –º–æ–¥–µ–ª—å –∑–∞ 1 —Ö–≤–∏–ª–∏–Ω—É.
      </p>

      <div class="searchbox" role="search">
        <input id="homeSearch" placeholder="Search: dragon, cosplay, tools, miniatures..." autocomplete="off">
        <a class="btn primary" id="homeSearchBtn" href="{{ safe_url_for('market.page_market') }}">Search</a>
      </div>

      <div class="chiprow" aria-label="Popular categories">
        <span class="chip" data-q="dragon">üêâ Dragons</span>
        <span class="chip" data-q="cosplay">üõ°Ô∏è Cosplay</span>
        <span class="chip" data-q="miniatures">üßô Miniatures</span>
        <span class="chip" data-q="tools">üß∞ Tools</span>
        <span class="chip" data-q="home">üè† Home</span>
        <span class="chip" data-q="gaming">üéÆ Gaming</span>
      </div>

      <div class="hero-actions">
        <a class="btn primary" href="{{ safe_url_for('market.page_market') }}">Open Market</a>
        <a class="btn" href="{{ safe_url_for('market.page_market_upload') or '#' }}">Upload STL</a>
        <a class="btn" href="{{ safe_url_for('profile.top100') or '#' }}">Top creators</a>
      </div>
    </div>

    <div class="panel">
      <h3 style="margin:0 0 8px;font-size:16px">Live</h3>

      <div class="stat">
        <b>Users</b>
        <span>{{ (admin_metrics.total_users if admin_metrics is defined else 0) }}</span>
      </div>
      <div class="stat">
        <b>Online now</b>
        <span>{{ (admin_metrics.online_now if admin_metrics is defined else 0) }}</span>
      </div>
      <div class="stat">
        <b>Visitors this month</b>
        <span>{{ (admin_metrics.monthly_visitors if admin_metrics is defined else 0) }}</span>
      </div>

      <div style="margin-top:12px;color:var(--muted);font-size:13px;line-height:1.5">
        –î–∞–ª—ñ –º–æ–∂–Ω–∞ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ ‚ÄúTrending‚Äù –∑ API, –∞–ª–µ —Ü–µ–π –±–ª–æ–∫ –≤–∂–µ –≤–∏–≥–ª—è–¥–∞—î —è–∫ –ø—Ä–æ–¥—É–∫—Ç, –∞ –Ω–µ —è–∫ —Ç–µ—Å—Ç.
      </div>
    </div>
  </div>
</div>

<div class="section">
  <div class="cards">
    <div class="card">
      <h3>Creator-first</h3>
      <p>–§–æ–∫—É—Å –Ω–∞ –∞–≤—Ç–æ—Ä–∞—Ö: –ø—Ä–æ–∑–æ—Ä—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏, —á—ñ—Ç–∫—ñ –ø—Ä–∞–≤–∏–ª–∞, —à–≤–∏–¥–∫–∏–π upload —ñ –Ω–æ—Ä–º–∞–ª—å–Ω–∏–π –ø—Ä–µ–≤ º—é-—Ñ–ª–æ—É.</p>
    </div>
    <div class="card">
      <h3>Fast browsing</h3>
      <p>–ú–∞—Ä–∫–µ—Ç –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è —è–∫ —Å—Ç—Ä—ñ—á–∫–∞: –ª–µ–≥–∫–∏–π HTML + –¥–∞–Ω—ñ —á–µ—Ä–µ–∑ API, –±–µ–∑ ‚Äú–±—ñ–ª–∏—Ö –µ–∫—Ä–∞–Ω—ñ–≤‚Äù.</p>
    </div>
    <div class="card">
      <h3>Trust & safety</h3>
      <p>–£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω—ñ –ø–æ–º–∏–ª–∫–∏, request_id, –∞–¥–º—ñ–Ω-debug, —ñ –∫–æ–Ω—Ç—Ä–æ–ª—å —Ç–æ–≥–æ —â–æ —Ä–µ–∞–ª—å–Ω–æ –ª–∞–º–∞—î—Ç—å—Å—è.</p>
    </div>
  </div>
</div>

<script>
(function(){
  var input = document.getElementById('homeSearch');
  var btn = document.getElementById('homeSearchBtn');
  function go(q){
    q = (q||'').trim();
    var url = "{{ safe_url_for('market.page_market') or '/market' }}";
    if(q) url += (url.indexOf('?')>=0 ? '&' : '?') + "q=" + encodeURIComponent(q);
    window.location.href = url;
  }
  btn && btn.addEventListener('click', function(e){
    e.preventDefault(); go(input && input.value);
  });
  input && input.addEventListener('keydown', function(e){
    if(e.key === 'Enter'){ e.preventDefault(); go(input.value); }
  });
  document.querySelectorAll('.chip[data-q]').forEach(function(ch){
    ch.addEventListener('click', function(){ go(ch.getAttribute('data-q')); });
  });
})();
</script>
{% endblock %}
