/* =======================
   CHAT — контейнер
   ======================= */
.chat{
  width:320px;height:400px;
  display:flex;flex-direction:column;
  border-radius:12px;overflow:hidden;
  font-size:14px;
  box-shadow:0 4px 16px rgba(0,0,0,.3);
}

/* Заголовок */
.chat-header{
  display:flex;justify-content:space-between;align-items:center;
  padding:8px 12px;font-weight:700;
  background:var(--chat-header-bg);color:#fff;
}

/* Список повідомлень */
.chat-messages{
  flex:1;overflow-y:auto;padding:10px;
  background:var(--chat-bg);color:#fff;
}

/* Один рядок повідомлення */
.chat-message{
  display:flex;align-items:flex-end;gap:8px;
  margin:2px 0; /* мінімальний інтервал */
}

/* Свої -> праворуч (як у ТГ) */
.chat-message.me{
  flex-direction:row-reverse;
}

/* Групування: продовження серії того ж автора */
.chat-message.cont .chat-avatar{ display:none; }
.chat-message.cont:not(.me) .chat-bubble{ margin-left:24px; }  /* 32 аватар - 8 gap */
.chat-message.cont.me .chat-bubble{ margin-right:24px; }

/* Аватар */
.chat-avatar{
  width:20px;height:20px;flex:0 0 20px;
  border-radius:50%;object-fit:cover;
}

/* =======================
   БУЛЬБАШКА (пігулка)
   ======================= */
.chat-bubble{
  position:relative;
  max-width:220px;
  display:inline-flex;align-items:baseline;gap:6px; /* текст + час в один рядок */
  padding:2px 8px;                    /* НИЗЬКА висота */
  border-radius:16px; border:0;
  background:#fff; color:#111;
  box-shadow:0 1px 1px rgba(0,0,0,.08);
  line-height:1.02; font-size:12px;   /* дуже щільно */
  word-break:break-word; white-space:pre-wrap;
}

/* Свої бульбашки (лайт-зелені, як у ТГ) */
.chat-message.me .chat-bubble{
  background:#e6fecd; color:#111;
}

/* “Телеграмний” плавний хвостик — тільки першому в серії */
.chat-bubble::before{
  content:""; position:absolute; bottom:0; left:-5px;
  width:8px;height:8px;background:inherit;
  border-bottom-left-radius:8px;
  box-shadow:0 1px 0 rgba(0,0,0,.06);
}
.chat-message.me .chat-bubble::before{
  left:auto; right:-5px;
  border-bottom-left-radius:0; border-bottom-right-radius:8px;
}
/* Продовження серії — хвостик прибираємо */
.chat-message.cont .chat-bubble::before{ display:none; }

/* Ім’я (якщо раптом показуєш) — приглушити і не збільшувати висоту */
.chat-name{
  display:none; /* прибрав, щоб не піднімало висоту; ввімкни за потреби */
  font-weight:600; color:#fff; text-decoration:none;
}

/* Текст + час */
.chat-text{ margin:0; }
.chat-time{
  white-space:nowrap;
  font-size:11px; line-height:1;
  color:rgba(0,0,0,.45);
  font-variant-numeric:tabular-nums;
}

/* Поле вводу */
.chat-input{
  display:flex;gap:8px;padding:8px;background:var(--chat-header-bg);
}
.chat-input input{
  flex:1;border:none;padding:8px;border-radius:8px;
}
.chat-input button{
  padding:8px 12px;border:none;border-radius:8px;
  background:#4e7fff;color:#fff;cursor:pointer;
}

/* =======================
   Теми (через data-theme)
   ======================= */
:root[data-theme="dark"]{
  --chat-bg:#1e1e1e;
  --chat-header-bg:#333;
}
:root[data-theme="blue"]{
  --chat-bg:#1a2a40;
  --chat-header-bg:#264d73;
}
:root[data-theme="emerald"]{
  --chat-bg:#12332d;
  --chat-header-bg:#1e5246;
}
:root[data-theme="violet"]{
  --chat-bg:#2a1e3d;
  --chat-header-bg:#4b2a73;
}
:root[data-theme="light"]{
  --chat-bg:#f5f5f5;
  --chat-header-bg:#888;
  color:#000;
}
